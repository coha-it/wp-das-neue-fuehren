window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},function(d,n){n.dhl_post_label={params:{},init:function(){var e=n.dhl_post_label;e.params=wc_gzd_admin_deutsche_post_label_params,d(document).on("change","#deutsche_post_label_dhl_product, .wc-gzd-shipment-im-additional-services :input",e.onRefreshPreview),d(document.body).on("wc_gzd_shipment_label_after_init",e.onInit)},onInit:function(){var e=n.dhl_post_label;0<d("#deutsche_post_label_dhl_product").length&&e.refreshProductData()},getSelectedAdditionalServices:function(){return d(".wc-gzd-shipment-im-additional-services :input:checked").map(function(){return d(this).val()}).get()},onRefreshPreview:function(){var e=n.dhl_post_label,t=germanized.admin.shipment_label_backbone.backbone,a={},i=d(".wc-gzd-shipment-create-label");a.security=e.params.refresh_label_preview_nonce,a.product_id=e.getProductId(),a.selected_services=e.getSelectedAdditionalServices(),a.action="woocommerce_gzd_dhl_refresh_deutsche_post_label_preview",t.doAjax(a,i,e.onPreviewSuccess)},onPreviewSuccess:function(e){var t=n.dhl_post_label,a=d(".wc-gzd-dhl-im-product-data .col-preview"),i=d(".wc-gzd-dhl-im-product-data").find(".image-preview");e.is_wp_int?a.parents(".wc-gzd-shipment-create-label").find(".wc-gzd-shipment-im-page-format").hide():a.parents(".wc-gzd-shipment-create-label").find(".wc-gzd-shipment-im-page-format").show(),e.preview_url?(a.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),i.find(".stamp-preview").length<=0&&i.append('<img class="stamp-preview" style="display: none;" />'),t.replaceProductData(e.preview_data),i.find(".stamp-preview").attr("src",e.preview_url).load(function(){a.unblock(),d(this).show()})):i.html("")},refreshProductData:function(){n.dhl_post_label.onRefreshPreview()},getProductId:function(){return d("#deutsche_post_label_dhl_product").val()},replaceProductData:function(t){n.dhl_post_label;var e=d(".wc-gzd-shipment-create-label").find(".wc-gzd-dhl-im-product-data");e.find(".data-placeholder").html(""),e.find(".data-placeholder").each(function(){var e=d(this).data("replace");t.hasOwnProperty(e)?(d(this).html(t[e]),d(this).show()):d(this).hide()})}},d(document).ready(function(){germanized.admin.dhl_post_label.init()})}(jQuery,window.germanized.admin);